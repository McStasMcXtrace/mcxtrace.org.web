
<h1>McXtrace - Monte Carlo Xray Tracing, is a joint venture by</h1>
</p><p><span class="plainlinks">
</p>
<table class="wikitable" border="0">
<tr>
  <td> <a href="http://www.fys.dtu.dk" class="external text" title="http://www.fys.dtu.dk" rel="nofollow"><img src="/files/dtu_logo.gif" alt="DTU_logo.gif" /></a>
  </td><td> <a href="http://www.nbi.ku.dk" class="external text" title="http://www.nbi.ku.dk" rel="nofollow"><img src="/files/b_nat_cmyk.png" alt="B_NAT_cmyk.png" /></a>
  </td><td> <a href="http://www.esrf.eu" class="external text" title="http://www.esrf.eu" rel="nofollow"><img src="/files/ersf_logo.png" alt="ERSF_logo.png" /></a>
  </td><td> <img alt="SAXSLab ApS." src="/saxslab-logo.jpg" height="50" border="0" />
  </td>
</tr>
</table>
<p> 


<p></span>
</p><p>Funding from NABIIT, <a href="http://fi.dk/raad-og-udvalg/det-strategiske-forskningsraad" class="external text" title="http://fi.dk/raad-og-udvalg/det-strategiske-forskningsraad" rel="nofollow">DSF</a> and the above parties.
</p><p>Our code is based on technology from <a href="http://www.mcstas.org" class="external text" title="http://www.mcstas.org" rel="nofollow"><img src="/files/mcstas_logo_thumb.png" alt="mcstas_logo_thumb.png" /></a>.
</p><p>Code repository (shared with 'McStas') is located at <a href="https://github.com/McStasMcXtrace" class="external text" title="http://github.com/McStasMcXtrace" rel="nofollow">github.com/McStasMcXtrace</a>
</p><p>For information on our progress, please subscribe to our <a href="/List">user mailinglist</a>..
</p>
<ul><li> To download the latest release: <a href="http://downloads.mcxtrace.org" class="external text" title="http://downloads.mcxtrace.org" rel="nofollow">download area</a>
</li><li> For installation instructions&nbsp;: <a href="installation">installation</a>
</li><li> For a quick list of the available commands: <a href="documentation/commands">commands</a>
</li></ul>
<hr>

<a name="McXtrace_News" id="McXtrace_News"></a><h2> <span class="mw-headline"> McXtrace News </span></h2>
The latest McXtrace news.

<a name="McXtrace 1.4: workaround for a python issue on windows 10"</a> <h3> <span class="mw-headline">McXtrace 1.4: workaround for a python issue on windows 10</span></h3>
A reported issue with McXtrace 1.4 and numpy has found a workaround.

The procedure below has been reported to work, if when starting an McXtrace simiulation for the GUI, you happen to see error messages complaing about missing dlls and at the end of them (there can be a lot) find something like the following:
<pre><code>
File "C:\mcxtrace-1.4\miniconda3\lib\site-packages\numpy\core\__init__.py", line 14, in <module>
from . import multiarray ImportError: DLL load failed ...
</code></pre>

If this applies to you then you may try this, which has been reported to work:
<ol>
    <li> Move the numpy folder in the miniconda3 folder <code>c:/mcxtrace-1.4/minoconda3/Lib/site-packages/numpy</code> out of the way.</li>
    <li> Start a mcxtrace shell session</li>
    <li> In the shell, issue the command: <code>pip install numpy</code></li>
</ol>


<a name="McXtrace 1.4 known bugs"></a><h3> <span class="mw-headline"> McXtrace 1.4: known bugs</span></h3>
<ul>
    <li> Lens_parab &amp; Lens_parab_Cyl: A missing 'I' in the header (line 11) trips the intersection algorithm. Fixed in the devlopment tree</li>
    <li> mxplot-pyqtgraph  on windows: An error in a post-install script causes
        the file c:\mcxtrace-1.4\bin\mxplot-pyqtgraph to have a typo where it
        says mcplot.py instead of mxplot.py as it should. The mxplot-pyqtgraph
        script is generated install time - the install procedure has been
        altered to fix this. 
        For existing systems the simple workaround is to
        either edit that file in place or to replace it with one from this link:<a
           href="downloads.mcxtrace.org/mcxtrace-1.4/fixes">downloads.mcxtrace.org/mcxtrace-1.4/fixes</a>.
    </li>
    <li> On windows, if you want to use the Undulator component, you must also
        install The GNU scientific Library (GSL). It is available from <a
            href="http://gnuwin32.sourceforge.net/packages/gsl.htm">gnuwin32.sourceforge.net/packages/gsl</a>.
        This also implies that you probably need to edit the mcxtrace compiler
        flags. Go to File->Configure and add something along the lines
        "-Lc:\mcxtrace\Program Files (x86)\GnuWin32\lib -Ic:\mcxtrace\Program
        Files (x86)\GnuWin32\include" to the C flags box for mcxxtrace to be
        find the libraries compile time.</li> 
</ul>
<a name="McXtrace 1.4 Released!"></a><h3> <span class="mw-headline"> McXtrace 1.4 is released!</span></h3>
The McXtrace team is prod to annoucen that McXtrace 1.4 has finally been released. In the first step packages are made available for debian systems, while the testing trolls do their work on the rpms and windows file to make sure the installation procedure runs as smooth as possible. Fortunately testing trolls do not celebrate Swedish midsummers' eve.

New features of 1.4 (pasted from the CHANGES file):
<ol>
    <li> Source_pt, Source_flat, Source_gaussian, and Source_div now behave in the same manner wrt. phase. The relevant parameters
        are randomphase and phase. If randomphase is !=0 the phase is completely random, if ==0 the value of phase is used.</li>
    <li> EPSD_monitor: Has a parameter nE which denotes a number of energy bins. if >1 the monitor will output a number of files.
        each corresponding to an energy bin.</li>
    <li> Lens_parab, Lens_parab_Cyl The functionality of the _rough versions of these components have been merged into the main components
and the _rough versions themselves retired.</li>
    <li> Support for binary file dump of photons in the mcpl-format is added.</li>
    <li> On debian class systems, McXtrace now installs to /usr/share to be more standards compliant.</li>
    <li> New Components:
        <ul>
            <li>sources/Undulator.comp: Undulator model based on Kim, 1989, "Characteristics of synchrotron radiation"</li>
            <li>samples/Incoherent.comp: Model sample of an incoherent scatterer</li>
            <li>samples/Polycrystal.comp: Polycrystal sample based on Single_crystal formalism</li>
            <li>samples/SasView_model.comp: All samples included in the SasModels module of SasView.
                    Currently does not take in absorption into account</li>
            <li>misc/Air.comp: A "box" full of Air that may scatter.</li>
            <li>misc/Focus.comp: Adds resampling to any component. I.e. causes the preceding object to become a secondary source.</li>
            <li>misc/MCPL_input.comp: Interface components to read/write MCPL-format files. </li>
            <li>misc/MCPL_output.comp</li>
            <li>monitors/DivE_monitor.comp</li>
            <li>monitors/DivPos_monitor.comp</li>
            <li>monitors/Divergence_monitor.comp</li>
            <li>optics/Bragg_crystal.comp: Superseeds Perfect_Crystal</li>
            <li>optics/Bragg_crystal_bent.comp: Bent crystal model</li>
            <li>optics/Capillary.comp: Capillary tube with reflecting walls.</li>
            <li>optics/Collimator_linear.comp: Ideal collimator models</li>
            <li>optics/Collimator_radial.comp</li>
            <li>optics/Mirror.comp: Simple flat mirror component</li>
            <li>optics/Mirror_toroid.comp: Toroidal mirror</li>
            <li>contrib/Detector_pn.comp: Detector model with quantum efficiency.</li>
            <li>contrib/SAXS/SAXSCurve.comp: A set of SAXS-sample models</li>
            <li>contrib/SAXS/SAXSCylinders.comp</li>
            <li>contrib/SAXS/SAXSEllipticCylinders.comp</li>
            <li>contrib/SAXS/SAXSLiposomes.comp</li>
            <li>contrib/SAXS/SAXSNanodiscsFast.comp</li>
            <li>contrib/SAXS/SAXSNanodiscsWithTagsFast.comp</li>
            <li>contrib/SAXS/SAXSNanodiscsWithTags.comp</li>
            <li>contrib/SAXS/SAXSNanodiscs.comp</li>
            <li>contrib/SAXS/SAXSPDBFast.comp</li>
            <li>contrib/SAXS/SAXSPDB.comp</li>
            <li>contrib/SAXS/SAXSQMonitor.comp</li>
            <li>contrib/SAXS/SAXSShells.comp</li>
            <li>contrib/SAXS/SAXSSpheres.comp</li>
        </ul>

   <li>Example Instrument simulations:
       <ul>
           <li> Full model of proposed DanMAX beamline.</li>
           <li> Pump_probe_solvent: Example of disordered scattering in solution.</li>
           <li> SAXS_saxlab: Laboratory SAXS setup with Montel optic.</li>
           <li> template_1Slit_Diff &amp; template_2Slit_Diff: examples of raytracing with coherent interference effects.</li>
           <li> ESRF_ID01: Microdiffraction beamline with polycrystal sample</li>
           <li> templateSasView: Example of using the (experimental) SasView interface.</li>
           <li> ... and various Unit test/Example instruments</li>
   </ul>
   <li>New python/Qt based GUI/plotting tool</li>
   <li>PowderN: incoherent scattering (computed from tables)
   <li>Curved Bragg monochromator crystal,
        Major improvements to the flat Bragg monochromator crystal</li>
    <li>Output in the NeXus-format.</li>
    <li>Data files (such as photoelectric absorption spectra) can be read once and reused by other components without further disk IO overhead.</li>
</ol>

<hr>

<a name="PowderNBug"></a><h3> <span class="mw-headline">Bug in PowderN.comp</span></h3>
A bug has been found in PowderN shipped with McXtrace 1.2. It results in underestimating absorption substantially. A patch has been commited to the devlopment tree
which may be downloaded from <a href="https://github.com/McStasMcXtrace/McCode/blob/master/mcxtrace-comps/samples/PowderN.comp">PowderN.comp</a>.
Thanks to the groups at University College London and Cranfield University for reporting this.
<hr>

<a href="news/old_news.html">Older News</a>

<hr>
<a name="McXtrace_Manual" id="McXtrace_Manual"></a><h3> <span class="mw-headline"> McXtrace Manual </span></h3>
<p>A manual is "under construction". A rough draft version is available here. From now on, we will upload nightly builds of the manuals here: <a href="http://download.mcxtrace.org/manual" class="external text" title="http://download.mcxtrace.org/manual" rel="nofollow">nightlies</a>.
</p><p>A printed, bound version is planned using a Print-On-Demand scheme. 
</p><p><b>This is work in progress and may contain significant omissions and inaccuracies</b> but for the interested it may be downloaded here:
</p>
<ul><li> <a href="mcxtrace_1.0_rc2_manual.pdf" class="internal" title="Mcxtrace-1.0 rc2-manual.pdf">User manual</a>
</li><li> <a href="mcxtrace_1.0_rc2_component_manual.pdf" class="internal" title="Mcxtrace-1.0 rc2-Component manual.pdf">Component manual</a>
</li></ul>
<p>The <i>User manual</i> documents the use of the McXtrace system whereas the <i>Component manual</i> details the inner workings of the models employed in the components, in other words the interaction physics between devices and beam.
</p>
<hr>
<a name="McXtrace_Code_Development" id="McXtrace_Code_Development"></a><h2> <span class="mw-headline"> McXtrace Code Development </span></h2>
<p>The <a href="/McXtraceDevel">code development</a> page has more info on code details
</p><p><br />
</p>
<hr>
<a name="Art_Gallery" id="Art_Gallery"></a><h2> <span class="mw-headline"> Art Gallery </span></h2>
<p>We've established a gallery of plots which are beautiful/funnny or otherwise interesting at <a href="/Art">McXtraceArt</a>. Please take a look and be inspired!
</p>
<hr>
<a name="Steering_Committee_Meeting_Minutes" id="Steering_Committee_Meeting_Minutes"></a><h2> <span class="mw-headline"> Steering Committee Meeting Minutes </span></h2>
<p>You may now access the <a href="/Minutes">minutes</a> of the steering committee meetings
</p><p><br />
<a href="mailto:webmaster@mcxtrace.org" class="external free" title="mailto:webmaster@mcxtrace.org" rel="nofollow">mailto:webmaster@mcxtrace.org</a>

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title>Unix installation page</title>
</head>

<body>
<p><b>The distribution packages for McStas may be downloaded via <a href="http://downloads.mcxtrace.org"</a>http://downloads.mcxtrace.org</a></b>

<h1> McXtrace 1.2 and later on Unix - from source code</h1>
In principle any Unix/Linux distribution should be able to run McXtrace, but
we specifically support Debian (.deb) and RedHat (.rpm) binary-package based
distributions - see <a href="../install_linux/"></a>
<p>In case your Unix is not Debian or RedHat like, you should still be
able to build either from the source tarball or directly from
GitHub. Both methods are examplified below:

<h3>Tarball Installation on FreeBSD (tested on PC-BSD 10.0) using ports</h3>
<i>N.B. McXtrace will be available on FreeBSD as binary packages shortly. You will then be able to install it simply by: <code>[sudo] pkg install mcxtrace</code>.
</i>

<ul>
  <li>Install and enable the FreeBSD ports system (see your OS documentation for details)
  <li>Install the following dependencies via the pkg and ports systems:
  <ul>
    <li>Base dependencies for McXtrace code generator:<br>sudo pkg install cmake flex bison
    <li>Dependency for mcgui<br>
    sudo pkg install p5-Tk
    <li>Dependencies for legacy Perl mcplot/mcdisplay<br>
    sudo pkg install pgplot p5-PGPLOT  
    <li>Dependency for legacy Perl mcplot/mcdisplay PDL must be
    installed from the ports system using
    <ul>
      <li> cd /usr/ports/math/PDL/
      <li> sudo make install
      <li> cd -
    </ul>
    <li>Optional dependency for parallelisation<br>
    sudo pkg install openmpi
  </ul>
  <li> Download and build the McXtrace source code for Unix systems:
  <ul>
    <li>wget http://downloads.mcxtrace.org/mcxtrace-1.4/unix/mcxtrace-1.4-UNIX-src.tgz
    <li> Unpack the "metapackage" tarball<br> tar xzf McStas-1.4-UNIX-src.tgz
    <li> cd mcxtrace-1.4-UNIX-src/
    <li> Unpack the individual subpackages<br>
    find . -name \*tar.gz -exec tar xzf \{\} \;
    <li> Next, compile the individual packages you want (minimum set is mcxtrace-1.4-src mcstas-comps-1.4-src) using e.g.
    <ul>
      <li>cd mcstas-1.4-src
      <li>cmake -DCMAKE_TOOLCHAIN_FILE=cmake/toolchains/freebsd64.cmake -Denable_mcxtrace=1
      <li>make
      <li>sudo make install
    </ul>
  </ul>
</ul>
For the other McXtrace tool packages, please inspire from the
  dependencies listed in our <a target=_blank
  href="https://github.com/McStasMcXtrace/McCode/blob/master/BUILD_DEPS.TXT">BUILD_DEPS.TXT</a> document.

<h3>Building from GitHub</h3>

- check out a copy via

<pre><code>git clone https://github.com/McStasMcXtrace/McCode.git</code></pre>

<p>We build using CMake - which needs to be above version 3.0!

<p>Most of the build dependencies are listed in the file <a target=_blank
  href="https://github.com/McStasMcXtrace/McCode/blob/master/BUILD_DEPS.TXT">BUILD_DEPS.TXT</a>
  which is also located in your checked-out folder. 

  <p>Also, at the top level, in that folder you will find a set of helper scripts called <code>build_*</code> which we
  use to build for e.g. Debian, RedHat, Windows and Mac OS X The script <code>build_src_bin_mcxtrace</code> should
(via common Linux "settings" in the cmake "toolchains"
cmake/toolchains/linux*) be able to build most of the packages
as .tar.gz bundles.
<p>Each of the sub-packages can also be built directly from the
individual folders using a more or less standard CMake approach, e.g.:
<ul>
  <li>cd tools/Python/mxrun
  <li>mkdir tmp && cd tmp
  <li>cmake ..
  <li>make
  <li>make install
</ul>
The most important settings for cmake building are
<ul>
  <li>-DCMAKE_TOOLCHAIN_FILE=cmake/toolchains/freebsd64.cmake (defines
  various system default settings, mostly for the tool configuration)
  <li>-Denable_mcstas=1 (defines if building McStas or her sister
  McXtrace)
  <li>-DCMAKE_INSTALL_PREFIX=/usr/local/
</ul>

<p>Please report any trouble in using these instructions to <a href="mailto:mcxtrace-users@mcstas.org">mcxtrace-users@mcstas.org</a>.
<hr>
<address></address>
<!-- hhmts start -->Last modified: Thu Jun 16 10:49:39 CEST 2016 <!-- hhmts end -->
</body> </html>
